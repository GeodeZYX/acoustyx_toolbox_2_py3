#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Mar 21 16:20:26 2018

@author: psakicki
"""

from megalib import *


Vfil_dir = "/home/psakicki/GFZ_WORK/RENDU/1709_CANOPUS_Cloture/report_canopus/1505-1/"
Vfil_dir = "/home/psakicki/GFZ_WORK/RENDU/1709_CANOPUS_Cloture/report_canopus/1405-1/"
Vfil_dir = "/home/psakicki/GFZ_WORK/RENDU/1709_CANOPUS_Cloture/report_canopus/1505-1/"

Vfil_list = glob.glob(Vfil_dir + "*smartV")

nbpxp = 3

find_iter = lambda v : int(gf.split_improved(v,"toto",".smart"))
find_iter = lambda v : int(gf.split_improved(v,"iter",".smart"))

nb_inter_lis = [ find_iter(v) for v in Vfil_list ]


figPXP , axPXP = plt.subplots(nbpxp,1)
figALL , axALL = plt.subplots(2,1)

for vfil in Vfil_list:
    
    if find_iter(vfil) == 1:
        iaxALL = 0
    
    elif max(nb_inter_lis) == find_iter(vfil):
        iaxALL = 1

    else:
        continue

    
    V = np.loadtxt(vfil)
    
    for pxp in np.unique(V[:,0]):
        Vope = V[V[:,0] == pxp]
        
        T = geok.posix2dt(Vope[:,1],True)
        TT = T - T[0]
        R = Vope[:,2] 
        
        axPXP[int(pxp)].plot(T,R,'.')
        axALL[iaxALL].plot(T,R,'.')











