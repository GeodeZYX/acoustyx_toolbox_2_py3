# -*- coding: utf-8 -*-
"""
Created on Thu Sep 22 14:22:27 2016

@author: psakicki
"""

from megalib import *

path = '/home/psakicki/THESE/DATA/1506_GEODESEA/WORKING/OPERA4/IUEM_LAPTOP-3Beacontracking'
path = '/home/psakicki/THESE/DATA/1506_GEODESEA/WORKING/OPERA4/IUEM_LAPTOP-3Beacontracking_decimated'
path = '/home/psakicki/THESE/DATA/1506_GEODESEA/WORKING/OPERA4/IUEM_LAPTOP-3Beacontracking'
path = '/home/psakicki/THESE/DATA/1506_GEODESEA/WORKING/OPERA4/IUEM_LAPTOP-3Beacontracking_JackKnife'

barystk = []
E = glob.glob(path + '/*_11_*exp' ) + glob.glob(path + '/*_10_*exp' ) +  glob.glob(path + '/*_0_*exp' )  +  glob.glob(path + '/*_1_*exp' )

jk_rand_seed_stk = []

for e in E:
    ee = gf.pickle_loader(e)
    jk_rand_seed = ee[-1]["params var. de l'exp."]['jk_rand_seed']
    if ee[-1]['with_jackknife'] and not jk_rand_seed in jk_rand_seed_stk:
        barystk.append(ee[-1]["Barycentre 'brut' : Sum Xpxp / Npxp"])
        jk_rand_seed_stk.append(jk_rand_seed)


A = np.vstack(barystk)

plt.plot(A[:,1],A[:,0],'+')
plt.axis('equal')
ax = plt.gca()
ax.ticklabel_format(useOffset=False)

plt.xlabel('East Topocentric coordinates (m)')
plt.ylabel('North Topocentric coordinates (m)')
A.shape

np.mean(A,0)
np.std(A,0)

for b2 in list(itertools.combinations(barystk,2)):
    print(geok.dist(b2[0][:2],b2[1][:2]))