# -*- coding: utf-8 -*-
"""
Created on Sun Jun 26 09:15:05 2016

@author: psakicki
"""

from megalib import *

path = '/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working'
exp1 = "GRAD_mk1_10x50_x4100_y4100_nois1-0__grad0_0__"
exp2 = 'GRAD_mk1_50x50_x4100_y4100_nois1-0__grad2.82625440384e-06_0__'
pathout = '/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/exemple/Gdic/'
outname = 'Gdic10p6'

path = '/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/'

exp1 = 'GRAD_mk2c_25x25_x4100_y4100_nois1-0__grad0_0__'
exp2 = 'GRAD_mk2c_25x25_x4100_y4100_nois1-0__grad_realik__'



exp1='GRAD_mk2d_15x15_x4100_y4100_nois1-0__grad0_0__'
exp2='GRAD_mk2d_15x15_x4100_y4100_nois1-0__grad_realik__'
outname = 'Gdic_realik15'     #15 comme la taille de la grille

exp1='Grid4Gdic_10p5_3500_10x10_x4100_y4100_nois1-0__grad0_0__'
exp2="Grid4Gdic_10p5_3500_10x10_x4100_y4100_nois1-0__grad1e-05_0__"
outname = 'Gdic_10p5_3500_10' #10 comme la taille de la grille


pathout = '/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/exemple/Gdic/'

exp1 = 'Grid4Gdic_Interpo2_interp0_10x10_x4100_y4100_ang90_nois1-0__grad0_0__'
exp2 = 'Grid4Gdic_Interpo2_interp1_10x10_x4100_y4100_ang90_nois1-0__grad0_0__'
outname = 'Gdic_METEORInterpo2_10' #10 comme la taille de la grille

exp1 = 'Grid4Gdic_proxyMOVE_median2_10x10_x4100_y4100_ang90_nois1-0__grad0_0__'
exp2 = 'Grid4Gdic_proxyMOVE_median2_10x10_x4100_y4100_ang90_nois1-0__grad_realik__'
outname = 'Gdic_proxyMOVE_median2_10' #10 comme la taille de la grille

exp1 = "Grid4Gdic_Interpo3_interp0_20x20_x4100_y4100_ang90_nois1-0__grad0_0__"
exp2 = "Grid4Gdic_Interpo3_interp1_20x20_x4100_y4100_ang90_nois1-0__grad0_0__"
outname = 'Gdic_METEORInterpo3_20' #20 comme la taille de la grille

exp1="Grid4Gdic_Interpo4_atal_interp1_20x20_x4100_y4100_ang90_nois1-0__grad0_0__"
exp2="Grid4Gdic_Interpo4_atal_interp0_20x20_x4100_y4100_ang90_nois1-0__grad0_0__"
outname = 'Gdic_ATALInterpo4_20' #20 comme la taille de la grille

exp1='Grid4Gdic_Interpo4_meteor500_cental_SSP_ONLY1_20x20_x4100_y4100_ang90_nois1-0__grad0_0__'
exp2='Grid4Gdic_Interpo4_meteor500_cental_SSP_ONLY0_20x20_x4100_y4100_ang90_nois1-0__grad0_0__'
outname='Gdic_meteor500_20'

exp1="Grid4Gdic_Interpo4_atal500_cental_SSP_ONLY0_20x20_x4100_y4100_ang90_nois1-0__grad0_0__"
exp2="Grid4Gdic_Interpo4_atal500_cental_SSP_ONLY1_20x20_x4100_y4100_ang90_nois1-0__grad0_0__"
outname='Gdic_atal500_20'

exp1List    = []
exp2List    = []
outnameList = []

exp1List = ['GdicGENERATOR_METEOR_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran0_',
'GdicGENERATOR_METEOR_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran0_',
'GdicGENERATOR_METEOR_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran0_',
'GdicGENERATOR_ATAL_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran0_',
'GdicGENERATOR_ATAL_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran0_',
'GdicGENERATOR_ATAL_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran0_']

exp2List = ['GdicGENERATOR_METEOR_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran1_',
'GdicGENERATOR_METEOR_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran1_',
'GdicGENERATOR_METEOR_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran1_',
'GdicGENERATOR_ATAL_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran1_',
'GdicGENERATOR_ATAL_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran1_',
'GdicGENERATOR_ATAL_20x20_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran1_']


path = '/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/workingOLD/GdicGENERATOR/'

exp0List =[
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-trigrangle_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-trigrangle_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_atal_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-carree_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-trigrangle_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_grand-trigrangle_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_petit-carree_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/working/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran1_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/workingOLD/GdicGENERATOR/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran0_",
"/home/psakicki/THESE/CODES/CodePython/acoustyx_toolbox_2/workingOLD/GdicGENERATOR/GdicGENERATOR_2_meteor_10x10_x4100_y4100_ang90_nois1-0.0__grad0_0_design_triangle_kouran1_"]

exp1List = []
exp2List = []

for i in range(len(exp0List)):
    if np.mod(i,2) == 0:
        exp1List.append(exp0List[i])
    else:
        exp2List.append(exp0List[i])
        
for exp1 , exp2 in zip(exp1List,exp2List):
    ship = os.path.basename(exp1).split('_')[2]
    design = exp1.split('design')[1].split('_')[1]
    outname = '_'.join(('Gdic_FINALb_10',ship,design))
    exp1 = os.path.basename(exp1)
    exp2 = os.path.basename(exp2)
    
    #D1 = acls.give_me_the_path(os.path.join(path,exp1),exp1)

    outGdic = acls.gradient_SSP_dic_generate(path,exp1,exp2,pathout,outname,
                                           plot=1,export=0)

post_plots = 1
if post_plots:                       
    I = outGdic[1]
    
    xystk = []
    diststk = []
    for (x,y) in itertools.product(outGdic['4Y'] , outGdic['4X']):
        print(x,y)
        xystk.append((x,y))
        diststk.append(geok.dist((x,y),(10000, 10000)))
        
    plt.clf()
    plt.plot(diststk , outGdic['4dT'],'+')
    plt.clf()
    plt.plot( outGdic['4dT'],'-+')
    
    
    Y = np.arange(5000,15001)
    X = [11000] * len(Y)
    
    plt.clf()
    plt.plot(Y - 10000,I(list(zip(X,Y))) - np.max(I(list(zip(X,Y)))),'+')
    
    plt.subplots_adjust(left=0.3, right=0.9, top=0.9, bottom=0.2)
    matplotlib.rcParams.update({'font.size': 17})
    
    ax = plt.gca()
    import matplotlib.ticker as mtick
    ax.yaxis.set_major_formatter(mtick.FormatStrFormatter('%.1e'))
    plt.xlabel('North-South position of the emitter \n with respect to the reciver (m)')
    plt.ylabel('travel time difference caused \n by SV gradient (seconds)')

    #plt.plot(outtup['4dT'])

