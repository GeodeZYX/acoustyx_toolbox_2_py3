#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Thu Aug  9 16:13:36 2018

@author: psakicki
"""

from megalib import *

genepath = "/home/psakicki/GFZ_WORK/PROJECTS_OTHERS/1807_Article_GNSSA_ObsAnex/mk3_autentik_dekal_zonal_REBOOT1807_FBmodeOnOff"
exprefix = "BATCH_RC_mk3"

#from matplotlib import rc
#rc('text', usetex=True)

expdiclis4plot_all = []


for path in sorted(glob.glob(genepath + '/' + exprefix + "*" )):
    
    if not os.path.isdir(path):
        continue
    
    exp_name = os.path.basename(path)
    
    expdiclis4plot = glob.glob(path + '/*exp')

    expdiclis4plot_all = expdiclis4plot_all + expdiclis4plot

val_ecart_y_STK     = []
FBmode_STK     = []
name_STK            = []
name_simplified_STK = []

row_STK = []

for expdic_path in expdiclis4plot_all:
    expdic     = genefun.pickle_loader(expdic_path)
    
    val_ecart_y     = expdic[-1]['ecart 2D bary brut/vrai en distance'] * 1000.
    FBmode          = bool(int(expdic_path.split("_")[-3]))
    name            = expdic[-1]['nom']
    name_simplified = expdic[-1]['nom'].split("_")[6]
    if name_simplified == "x2000":
        name_simplified = expdic[-1]['nom'].split("_")[5]
    
    val_ecart_y_STK.append(val_ecart_y)
    FBmode_STK.append(FBmode)
    name_STK.append(name)
    name_simplified_STK.append(name_simplified)
    
    row_STK.append([ val_ecart_y , FBmode , name_simplified])


    
DF = pd.DataFrame(row_STK,columns=['ecart',
'FB'  ,
'name'])
    
A = DF[DF["FB"] == True]["ecart"]

B = DF[DF["FB"] == False]["ecart"]

pd.DataFrame(np.array(B) - np.array(A))

    
    