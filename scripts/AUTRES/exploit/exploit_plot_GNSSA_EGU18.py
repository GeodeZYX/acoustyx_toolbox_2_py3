#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Apr  4 13:22:19 2018

@author: psakicki
"""

from megalib import *

### Path original de l'EGU2018
path = "/home/psakicki/aaa_FOURBI/RB_EGU18/RB_EGU*TEMPO-A*Kdrift10*"

path = "/home/psakicki/aaa_FOURBI/GNSSA_SIMU_regroupement/RB_EGU18/RB_EGU*TEMPO-A*Kdrift10*"



Lfoldr = glob.glob(path)

ecart2D_stk =  []
nbpings_stk =  []
name_stk    =  []

for foldr in Lfoldr:
    Lexpdic = glob.glob(foldr + "/*111*exp")
    
    for expdic in Lexpdic:
        D     = gf.pickle_loader(expdic)
        
        Dlast = D[-1]
        
        ecart2D = Dlast['ecart 2D bary brut/vrai en distance']
        nbpings = Dlast["Nb pings"]
        name    = Dlast["nom"]
        
        print(name , ecart2D)
        
        ecart2D_stk.append(ecart2D)
        nbpings_stk.append(nbpings)
        
        name_stk.append(name)
        

fig , ax = plt.subplots()

ax.set_yscale('log')
ax.set_xscale('log')

ax.set_xlabel("Nb of pings")
ax.set_ylabel("Difference to the \n true barycenter")

ax2 = ax.twiny()
ax2.set_xscale('log')
ax2.set_xlabel("Measurement duration (hours)")


for e2d , nbpi , nam in zip(ecart2D_stk , nbpings_stk , name_stk):
    
    if "20100225" in nam:
        col = "b"

    else:
        col = "r"

        
    if "_R50_" in nam:
        sym = "o"
    else:
        sym = "s"
    
    ax.scatter(nbpi , e2d , marker = sym , c = col , s = 100)
    ax2.scatter((nbpi * 10)/3600, e2d , marker = sym , c = col , s = 100 ) 
    plt.tight_layout()
    

fig.patch.set_alpha(0)

gf.figure_saver(fig , "/home/psakicki/GFZ_WORK/RENDU/1801_EGU_Vienne/Posters/GNSSA/plots" , "temporal_diff" , ".pdf" )

    
    #ax2.cla()


    
        
        
        
        
        
        
    