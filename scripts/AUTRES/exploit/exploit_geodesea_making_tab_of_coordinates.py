# -*- coding: utf-8 -*-
"""
Created on Sat Sep 24 23:50:49 2016

@author: psakicki
"""

from megalib import *

path = '/home/psakicki/aaa_FOURBI/IUEM_LAPTOP-3Beacontracking/IUEM_LAPTOP-3Beacontracking_0_20160923_120354.exp'

D = gf.pickle_loader(path)

CoordsNED = D[-1]['nouvelles coords.']
BaryNED = D[-1]["Barycentre 'brut' : Sum Xpxp / Npxp"]
Sigmas = D[1]['sigmas']


TUPstk  =[]
Coords = np.dot(CoordsNED,geok.C_ned2enu())
x0 ,y0 , z0 =    4595047.79934 , 632288.017869 , 4363273.52335
for i in range(3):
    xyz=geok.ENU2XYZ(Coords[i,0],Coords[i,1],Coords[i,2],x0 ,y0 , z0 )
    flh=geok.XYZ2GEO(*xyz)
    
    TUP = tuple(CoordsNED[i]) + tuple(Sigmas[3*i:3*i+3]) + xyz + flh
    
    print(TUP)
    TUPstk.append(TUP)
    
BaryENU = np.dot(BaryNED,geok.C_ned2enu())
xyzBary=geok.ENU2XYZ(BaryENU[0],BaryENU[1],BaryENU[2],x0 ,y0 , z0 )
flhBary=geok.XYZ2GEO(*xyzBary)

T =tabulate.tabulate(TUPstk,floatfmt='.7f')

print(T)
    