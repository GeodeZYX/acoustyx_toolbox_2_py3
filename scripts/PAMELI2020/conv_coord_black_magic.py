#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon Nov  2 20:37:24 2020

@author: psakicki
"""

#### Import star style
from geodezyx import *                   # Import the GeodeZYX modules
from geodezyx.externlib import *         # Import the external modules
from geodezyx.megalib.megalib import *   # Import the legacy modules names

p="/home/psakicki/GFZ_WORK/PROJECTS_OTHERS/2001_PAMELi_GNSSA/04_Doc_Reports/ixBlue_coords.xlsx"

DF = pd.read_excel(p)

L1 = [
"48°19.18938N",
"48°19.18945N",
"48°19.18951N",
"48°19.18948N",
"48°19.18947N",
"48°19.18924N",

"48°19.18946N",
"48°19.18946N",
"48°19.18949N",
"48°19.18949N",
"48°19.18934N",


"4°26.76870W",
"4°26.76877W",
"4°26.76870W",
"4°26.76880W",
"4°26.76875W",
"4°26.76834W"

"004°26.76882W",
"004°26.76867W",
"004°26.76882W",
"004°26.76875W",
"004°26.76838W"]

L2 = [
"48°19.18917N",
      
"48°19.18928N",
"48°19.18937N",
"48°19.18931N",
"48°19.18931N",
"48°19.18929N",
"48°19.18920N",

"004°26.80993W",

"004°26.80974W",
"004°26.80970W",
"004°26.80969W",
"004°26.80979W",
"004°26.80970W",
"004°26.80992W"]

L3 = [
"48°19.205490N",
"48°19.205470N",
"48°19.205530N",
"48°19.205470N",
"48°19.205430N",
"48°19.205650N",

"48°19.205500N",
"48°19.205480N",
"48°19.205520N",
"48°19.205480N", 
"48°19.205680N",

"004°26.78678W",
"004°26.78669W",
"004°26.78678W",
"004°26.78678W",
"004°26.78678W",
"004°26.78665W"

"004°26.78676W",
"004°26.78663W",
"004°26.78670W",
"004°26.78668W",
"004°26.78668W"]


    
flh1=(48.319824833333335, -4.446147         , -40.07)
flh2=(48.319821833333336, -4.446828166666666, -40.66)
flh3=(48.32009133333333 , -4.446444666666666, -39.68)

Lin = L2
flhin = flh2

Lout = []
for l in Lin:
    Lout.append(conv.dms2dec(l,True))
    
La = Lout[:int(len(Lout)/2)]
Lb = Lout[int(len(Lout)/2):]

XYZstk = []
for la,lb in zip(La,Lb):
    FLH = np.array([la,-lb,flhin[-1]])
    XYZ = np.array(conv.GEO2XYZ(*FLH))
    XYZstk.append(XYZ)
        
XYZstk = np.vstack(XYZstk).T



xyz_ref = np.array([4236463.24737245, -329434.98845412, 4740641.89446747])



ENU = conv.XYZ2ENU_vector(XYZstk,xyz_ref)

NED = np.column_stack((ENU[:,1],ENU[:,0],-ENU[:,2]))

print(NED)

# np.array([[-7.22298422, 24.29822341, 91.99175988],
#           [-7.22298343, 24.4836296 , 91.99176058],
#           [-7.1673863 , 24.29822317, 91.99175981],
#           [-7.16738593, 24.38474606, 91.99176014],
#           [-7.44537355, 24.84208254, 91.99176222]])

# np.array([[ -7.55656224, -26.28058458,  92.58176811],
#           [ -7.38976872, -26.23114216,  92.58176771],
#           [ -7.5009646 , -26.21878226,  92.58176779],
#           [ -7.50096403, -26.34238638,  92.5817683 ],
#           [ -7.53802982, -26.23114284,  92.58176788],
#           [ -7.70482231, -26.50307269,  92.58176921]])

# np.array([[22.5033212 ,  2.12363201, 91.60174968],
#           [22.46625597,  2.28431656, 91.6017496 ],
#           [22.54038651,  2.19779409, 91.60174984],
#           [22.46625595,  2.22251482, 91.60174958],
#           [22.83690879,  2.22251467, 91.6017509 ]])
